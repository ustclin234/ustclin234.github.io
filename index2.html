<!DOCTYPE html>
<html>
<head>
	<title>GitHub Pages Image Viewer</title>
</head>
<body>
	<h1>GitHub Pages Image Viewer</h1>
	<img id="image" src="" width="1200" height="600">
	<br>
	<button onclick="prev()">Prev</button>
	<button onclick="next()">Next</button>

	<script>
	var images = [];
	var currentIndex = 0;

	fetch('https://api.github.com/repos/ustclin234/randomImgViewer/contents/imgs')
	  .then(response => response.json())
	  .then(data => {
	    data.forEach(function(item) {
	      if (item.type === 'file' && item.name.endsWith('.png')) {
		images.push(item.download_url);
	      }
	    });
	    document.getElementById('image').src = images[currentIndex];
	  })
	  .catch(error => {
	    console.error('Error fetching image list:', error);
	  });
		
	function prev() {
		if (currentIndex === 0) {
			currentIndex = images.length - 1;
		} else {
			currentIndex--;
		}
		document.getElementById('image').src = images[currentIndex];
	}

	function next() {
	    var randomIndex = Math.floor(Math.random() * images.length);
	    document.getElementById('image').src = images[randomIndex];
	}
	</script>
</body>
</html>
